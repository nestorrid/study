# 3.1 非空约束

`mapped_column()`会根据`Mapped`类型来自动获取类型和非空设置, 对于没有`Optional`注解的字段则为必填, 否则为允许空值. 但如果显示的指定了是否可以为空, 则以`mapped_column()`的参数为准.

```python
class SomeClass(Base):
    __tablename__ = "some_table"

    # primary_key=True, therefore will be NOT NULL
    id: Mapped[int] = mapped_column(primary_key=True)

    # not Optional[], therefore will be NOT NULL
    data: Mapped[str]

    # Optional[], therefore will be NULL
    additional_info: Mapped[Optional[str]]
```

对象的字段定义和数据库字段的非空定义可以不同,  在该情况下, 对象的字段定义会在创建python对象时进行验证, 而数据库字段的设置则始终以`mapped_column()`参数为准.

```python
class SomeClass(Base):
    # ...

    # will be String() NOT NULL, but can be None in Python
    data: Mapped[Optional[str]] = mapped_column(nullable=False)
    
class SomeClass(Base):
    # ...

    # will be String() NULL, but type checker will not expect
    # the attribute to be None
    data: Mapped[str] = mapped_column(nullable=True)    
```

