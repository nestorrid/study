# 3.6 反射数据库

从已有的数据库中得到模型类, 无需逐个字段进行定义. 在对现有项目进行逆向工程, 或者对数据库进行独立维护时作用就很大.



```python
from sqlalchemy import create_engine
from sqlalchemy import Table
from sqlalchemy.orm import DeclarativeBase

engine = create_engine("postgresql+psycopg2://user:pass@hostname/my_existing_database")


class Base(DeclarativeBase):
    pass


class MyClass(Base):
    __table__ = Table(
        "mytable",
        Base.metadata,
        autoload_with=engine,
    )
```



也可以直接对整个数据库进行反射, 然后用更为简单的方式来进行对象映射



```python
from sqlalchemy import create_engine
from sqlalchemy.orm import DeclarativeBase

engine = create_engine("postgresql+psycopg2://user:pass@hostname/my_existing_database")


class Base(DeclarativeBase):
    pass


Base.metadata.reflect(engine)


class MyClass(Base):
    __table__ = Base.metadata.tables["mytable"]
```

